/* Theme System CSS */
@import url('https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Work+Sans:wght@400;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme CSS Variables */
:root {
  --radius: 0.5rem;
  
  /* Default Purple Theme */
  --theme-primary: #8b5cf6;
  --theme-secondary: #a855f7;
  --theme-accent: #6366f1;
  --theme-background: #f8fafc;
  --theme-surface: #ffffff;
  --theme-text: #1e293b;
  --theme-text-secondary: #64748b;
  --theme-font-heading: system-ui, sans-serif;
  --theme-font-body: system-ui, sans-serif;
}

/* Theme-specific styles */
.theme-purple {
  --theme-primary: #8b5cf6;
  --theme-secondary: #a855f7;
  --theme-accent: #6366f1;
  --theme-background: #f8fafc;
  --theme-surface: #ffffff;
  --theme-text: #1e293b;
  --theme-text-secondary: #64748b;
}

.theme-ocean-blue {
  --theme-primary: #0ea5e9;
  --theme-secondary: #0284c7;
  --theme-accent: #38bdf8;
  --theme-background: #f0f9ff;
  --theme-surface: #ffffff;
  --theme-text: #0c4a6e;
  --theme-text-secondary: #075985;
}

.theme-forest-green {
  --theme-primary: #16a34a;
  --theme-secondary: #15803d;
  --theme-accent: #22c55e;
  --theme-background: #f0fdf4;
  --theme-surface: #ffffff;
  --theme-text: #14532d;
  --theme-text-secondary: #166534;
}

.theme-clean-pro-audio {
  --theme-primary: #e53935;
  --theme-secondary: #2c2c2c;
  --theme-accent: #ffeb3b;
  --theme-background: #e5e5e5;
  --theme-surface: #fdfdfd;
  --theme-text: #2c2c2c;
  --theme-text-secondary: #555555;
  --theme-font-heading: "IBM Plex Sans", sans-serif;
  --theme-font-body: "IBM Plex Sans", sans-serif;
}

.theme-midnight-blue {
  --theme-primary: #191970;
  --theme-secondary: #1e1e3f;
  --theme-accent: #4169e1;
  --theme-background: #f8f9fa;
  --theme-surface: #ffffff;
  --theme-text: #1a1a1a;
  --theme-text-secondary: #4a5568;
  --theme-font-heading: system-ui, sans-serif;
  --theme-font-body: system-ui, sans-serif;
}

/* Apply theme to body and typography */
body {
  background-color: var(--theme-background) !important;
  color: var(--theme-text) !important;
  font-family: var(--theme-font-body) !important;
  transition: background-color 0.3s ease, color 0.3s ease, font-family 0.3s ease;
}

/* Force theme application for all layouts */
.layout-consistent,
.main-content,
.min-h-screen {
  background-color: var(--theme-background) !important;
  color: var(--theme-text) !important;
}

/* Override Tailwind background classes */
.bg-background {
  background-color: var(--theme-background) !important;
}

.bg-white {
  background-color: var(--theme-surface) !important;
}

.text-foreground {
  color: var(--theme-text) !important;
}

/* Force theme colors on buttons and UI elements */
.bg-primary {
  background-color: var(--theme-primary) !important;
}

.text-primary {
  color: var(--theme-primary) !important;
}

.border-primary {
  border-color: var(--theme-primary) !important;
}

.bg-secondary {
  background-color: var(--theme-secondary) !important;
}

.text-secondary {
  color: var(--theme-secondary) !important;
}

/* Theme-specific button and menu overrides */
.theme-ocean-blue .bg-primary,
.theme-ocean-blue button[class*="bg-primary"] {
  background-color: #0ea5e9 !important;
}

.theme-ocean-blue .text-primary {
  color: #0ea5e9 !important;
}

.theme-forest-green .bg-primary,
.theme-forest-green button[class*="bg-primary"] {
  background-color: #16a34a !important;
}

.theme-forest-green .text-primary {
  color: #16a34a !important;
}

.theme-clean-pro-audio .bg-primary,
.theme-clean-pro-audio button[class*="bg-primary"] {
  background-color: #e53935 !important;
}

.theme-clean-pro-audio .text-primary {
  color: #e53935 !important;
}

/* Comprehensive theme overrides for all UI elements */
[class*="theme-"] .bg-violet-600,
[class*="theme-"] .bg-purple-600,
[class*="theme-"] .bg-primary {
  background-color: var(--theme-primary) !important;
}

[class*="theme-"] .text-violet-600,
[class*="theme-"] .text-purple-600,
[class*="theme-"] .text-primary {
  color: var(--theme-primary) !important;
}

[class*="theme-"] .border-violet-600,
[class*="theme-"] .border-purple-600,
[class*="theme-"] .border-primary {
  border-color: var(--theme-primary) !important;
}

/* Force override any hardcoded purple colors */
[class*="theme-"] button,
[class*="theme-"] .sidebar,
[class*="theme-"] nav a,
[class*="theme-"] .menu-item {
  color: inherit !important;
}

[class*="theme-"] button[class*="primary"],
[class*="theme-"] .primary-button {
  background-color: var(--theme-primary) !important;
}

/* Force override specific purple hover classes */
[class*="theme-"] .hover\:bg-purple-600:hover,
[class*="theme-"] .hover\:bg-violet-600:hover,
[class*="theme-"] .hover\:bg-primary:hover {
  background-color: var(--theme-primary) !important;
}

/* Ocean blue theme overrides */
html.theme-ocean-blue,
html.theme-ocean-blue body,
.theme-ocean-blue,
.theme-ocean-blue .bg-background,
.theme-ocean-blue .min-h-screen {
  background-color: #e0f2fe !important;
  color: #0f172a !important;
}

/* Forest green theme overrides */
html.theme-forest-green,
html.theme-forest-green body,
.theme-forest-green,
.theme-forest-green .bg-background,
.theme-forest-green .min-h-screen {
  background-color: #f0fdf4 !important;
  color: #14532d !important;
}

.theme-clean-pro-audio {
  --theme-primary: #e53935 !important;
  --theme-secondary: #2c2c2c !important;
  --theme-accent: #ffeb3b !important;
  --theme-background: #e5e5e5 !important;
  --theme-surface: #fdfdfd !important;
  --theme-text: #2c2c2c !important;
  --theme-text-secondary: #555555 !important;
  --theme-font-heading: "IBM Plex Sans", sans-serif !important;
  --theme-font-body: "IBM Plex Sans", sans-serif !important;
}

/* Clean Pro Audio theme overrides */
html.theme-clean-pro-audio,
html.theme-clean-pro-audio body,
.theme-clean-pro-audio,
.theme-clean-pro-audio .bg-background,
.theme-clean-pro-audio .min-h-screen {
  background-color: #e5e5e5 !important;
  color: #2c2c2c !important;
  font-family: "IBM Plex Sans", sans-serif !important;
}

.theme-clean-pro-audio .bg-white,
.theme-clean-pro-audio .bg-card,
.theme-clean-pro-audio .bg-popover {
  background-color: #fdfdfd !important;
}

.theme-heading {
  font-family: var(--theme-font-heading);
}

.theme-body {
  font-family: var(--theme-font-body);
}

/* Balanced viewport scaling for consistent dev/production rendering */
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

/* Reset all margins and padding to prevent scaling differences */
* {
  margin: 0;
  padding: 0;
}

/* Increased viewport sizing for better deployed version readability */
html {
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
  font-size: 16px;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
}

body {
  font-size: 1rem;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  width: 100%;
  min-height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

#root {
  width: 100%;
  min-height: 100vh;
  position: relative;
}

/* Enhanced responsive scaling */
@media screen and (max-width: 480px) {
  html {
    font-size: 15px;
  }
}

@media screen and (min-width: 481px) and (max-width: 768px) {
  html {
    font-size: 16px;
  }
}

@media screen and (min-width: 769px) and (max-width: 1199px) {
  html {
    font-size: 16.5px;
  }
}

@media screen and (min-width: 1200px) {
  html {
    font-size: 17px;
  }
}

/* Enhanced sizing utilities */
.sidebar-consistent {
  font-size: 0.95rem !important;
  line-height: 1.35rem !important;
}

.layout-consistent {
  min-height: 100vh;
  position: relative;
}

/* Responsive layout utilities */
@media (min-width: 768px) {
  .main-content {
    margin-left: 16rem;
  }
}

@media (max-width: 767px) {
  .main-content {
    margin-left: 0;
  }
}

:root {
  /* Primary Purple Colors from backup */
  --background: hsl(0, 0%, 100%);
  --foreground: hsl(224, 71.4%, 4.1%);
  --primary: hsl(262, 83%, 72%);
  --primary-foreground: hsl(210, 20%, 98%);
  
  /* Secondary Colors */
  --secondary: hsl(220, 14.3%, 95.9%);
  --secondary-foreground: hsl(220.9, 39.3%, 11%);
  --muted: hsl(220, 14.3%, 95.9%);
  --muted-foreground: hsl(220, 8.9%, 46.1%);
  --border: hsl(220, 13%, 91%);
  --input: hsl(220, 13%, 91%);
  
  /* Accent & Status Colors */
  --accent: hsl(220, 14.3%, 95.9%);
  --accent-foreground: hsl(220.9, 39.3%, 11%);
  --destructive: hsl(0, 84.2%, 60.2%);
  --destructive-foreground: hsl(210, 20%, 98%);
  --ring: hsl(262, 83%, 72%);
  --radius: 0.5rem;
  
  /* Popover and Card */
  --popover: hsl(0, 0%, 100%);
  --popover-foreground: hsl(224, 71.4%, 4.1%);
  --card: hsl(0, 0%, 100%);
  --card-foreground: hsl(224, 71.4%, 4.1%);
  
  /* Chart Colors */
  --chart-1: hsl(262, 83%, 72%);
  --chart-2: hsl(252, 83%, 82%);
  --chart-3: hsl(272, 83%, 62%);
  --chart-4: hsl(242, 83%, 82%);
  --chart-5: hsl(282, 83%, 62%);
  
  /* Sidebar-Specific Colors */
  --sidebar-background: hsl(0, 0%, 98%);
  --sidebar-foreground: hsl(224, 71.4%, 4.1%);
  --sidebar-primary: hsl(262, 83%, 72%);
  --sidebar-primary-foreground: hsl(210, 20%, 98%);
  --sidebar-accent: hsl(262, 83%, 72%);
  --sidebar-accent-foreground: hsl(210, 20%, 98%);
  --sidebar-border: hsl(220, 13%, 91%);
  --sidebar-ring: hsl(262, 83%, 72%);
  
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

.dark {
  --background: #000000;
  --foreground: #ffffff;
  --muted: #1a1a1a;
  --muted-foreground: #a0a0a0;
  --popover: #1a1a1a;
  --popover-foreground: #ffffff;
  --card: #1a1a1a;
  --card-foreground: #ffffff;
  --border: #333333;
  --input: #333333;
  --primary: #ffd700;
  --primary-foreground: #000000;
  --secondary: #1a1a1a;
  --secondary-foreground: #ffffff;
  --accent: #ffd700;
  --accent-foreground: #000000;
  --destructive: #dc3545;
  --destructive-foreground: #ffffff;
  --ring: #ffd700;
  --radius: 0.375rem;
  --chart-1: #ffd700;
  --chart-2: #ffd700;
  --chart-3: #ffffff;
  --chart-4: #a0a0a0;
  --chart-5: #333333;
  --sidebar-background: #000000;
  --sidebar-foreground: #ffffff;
  --sidebar-primary: #ffd700;
  --sidebar-primary-foreground: #000000;
  --sidebar-accent: #ffd700;
  --sidebar-accent-foreground: #000000;
  --sidebar-border: #333333;
  --sidebar-ring: #ffd700;
}

/* Purple Theme Dark Mode */
.purple-theme.dark {
  --background: hsl(224, 71.4%, 4.1%);
  --foreground: hsl(210, 20%, 98%);
  --primary: hsl(263, 70%, 65%);
  --primary-foreground: hsl(210, 20%, 98%);
  --secondary: hsl(215, 27.9%, 16.9%);
  --secondary-foreground: hsl(210, 20%, 98%);
  --muted: hsl(215, 27.9%, 16.9%);
  --muted-foreground: hsl(215, 20.2%, 65.1%);
  --border: hsl(215, 27.9%, 16.9%);
  --input: hsl(215, 27.9%, 16.9%);
  --accent: hsl(215, 27.9%, 16.9%);
  --accent-foreground: hsl(210, 20%, 98%);
  --destructive: hsl(0, 62.8%, 30.6%);
  --destructive-foreground: hsl(210, 20%, 98%);
  --ring: hsl(263, 70%, 65%);
  --radius: 0.5rem;
  --popover: hsl(224, 71.4%, 4.1%);
  --popover-foreground: hsl(210, 20%, 98%);
  --card: hsl(224, 71.4%, 4.1%);
  --card-foreground: hsl(210, 20%, 98%);
  --chart-1: hsl(263, 70%, 65%);
  --chart-2: hsl(253, 70%, 75%);
  --chart-3: hsl(273, 70%, 55%);
  --chart-4: hsl(243, 70%, 75%);
  --chart-5: hsl(283, 70%, 55%);
  --sidebar-background: hsl(224, 71.4%, 4.1%);
  --sidebar-foreground: hsl(210, 20%, 98%);
  --sidebar-primary: hsl(263, 70%, 65%);
  --sidebar-primary-foreground: hsl(210, 20%, 98%);
  --sidebar-accent: hsl(263, 70%, 65%);
  --sidebar-accent-foreground: hsl(210, 20%, 98%);
  --sidebar-border: hsl(215, 27.9%, 16.9%);
  --sidebar-ring: hsl(263, 70%, 65%);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

@layer utilities {
  /* Purple theme scrollbars */
  .purple-theme::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .purple-theme::-webkit-scrollbar-track {
    background: hsl(220, 14.3%, 95.9%);
    border-radius: 4px;
  }
  
  .purple-theme::-webkit-scrollbar-thumb {
    background: hsl(262, 83%, 72%);
    border-radius: 4px;
  }
  
  .purple-theme::-webkit-scrollbar-thumb:hover {
    background: hsl(262, 83%, 65%);
  }
  
  /* Firefox scrollbar styling for purple theme */
  .purple-theme {
    scrollbar-width: thin;
    scrollbar-color: hsl(262, 83%, 72%) hsl(220, 14.3%, 95.9%);
  }
  
  /* Theme-aware scrollbars for all themes */
  .theme-ocean-blue::-webkit-scrollbar-thumb {
    background: #0ea5e9;
  }
  
  .theme-forest-green::-webkit-scrollbar-thumb {
    background: #16a34a;
  }
  
  .theme-clean-pro-audio::-webkit-scrollbar-thumb {
    background: #e53935;
  }
  
  .theme-midnight-blue::-webkit-scrollbar-thumb {
    background: #191970;
  }
  
  /* Firefox scrollbar for all themes */
  .theme-ocean-blue {
    scrollbar-color: #0ea5e9 hsl(220, 14.3%, 95.9%);
  }
  
  .theme-forest-green {
    scrollbar-color: #16a34a hsl(220, 14.3%, 95.9%);
  }
  
  .theme-clean-pro-audio {
    scrollbar-color: #e53935 #e5e5e5;
  }
  
  .theme-midnight-blue {
    scrollbar-color: #191970 hsl(220, 14.3%, 95.9%);
  }
}

/* Enhanced Card Component Styling */
.enhanced-card {
  @apply bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200;
}

.enhanced-card.active {
  @apply border-primary ring-2 ring-primary ring-opacity-20;
}

/* Card component variants */
.card-gradient {
  background: linear-gradient(135deg, var(--theme-surface) 0%, rgba(var(--theme-primary), 0.05) 100%);
}

.card-bordered {
  border-left: 4px solid var(--theme-primary);
}

/* Enhanced button styling */
.btn-primary-enhanced {
  @apply bg-primary text-white hover:bg-primary hover:bg-opacity-90 active:bg-primary active:bg-opacity-80 transition-colors duration-200 font-medium;
}

.btn-secondary-enhanced {
  @apply bg-secondary text-secondary-foreground hover:bg-secondary hover:bg-opacity-80 transition-colors duration-200;
}

/* Enhanced form styling */
.form-enhanced .form-group {
  @apply space-y-2;
}

.form-enhanced .form-label {
  @apply text-sm font-medium text-foreground;
}

.form-enhanced .form-control {
  @apply w-full px-3 py-2 border border-input rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent;
}

/* Status indicator utilities */
.status-success {
  @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;
}

.status-warning {
  @apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200;
}

.status-error {
  @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;
}

.status-info {
  @apply bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200;
}

/* Layout utilities */
.main-container {
  @apply min-h-screen bg-background;
}

.content-wrapper {
  @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
}

.section-spacing {
  @apply py-8 lg:py-12;
}

/* Navigation active states */
.nav-active {
  @apply bg-primary text-primary-foreground;
}

.nav-inactive {
  @apply text-muted-foreground hover:text-foreground hover:bg-accent;
}

/* Data table styling */
.data-table {
  @apply w-full border-collapse border border-border rounded-lg overflow-hidden;
}

.data-table th {
  @apply bg-muted text-muted-foreground font-medium text-left px-4 py-3 border-b border-border;
}

.data-table td {
  @apply px-4 py-3 border-b border-border;
}

.data-table tr:hover {
  @apply bg-muted bg-opacity-50;
}

/* Loading states */
.loading-skeleton {
  @apply animate-pulse bg-muted rounded;
}

.loading-spinner {
  @apply animate-spin w-4 h-4 border-2 border-primary border-r-transparent rounded-full;
}

/* Toast notification styling */
.toast-success {
  @apply bg-green-50 border-green-200 text-green-800;
}

.toast-error {
  @apply bg-red-50 border-red-200 text-red-800;
}

.toast-warning {
  @apply bg-yellow-50 border-yellow-200 text-yellow-800;
}

.toast-info {
  @apply bg-blue-50 border-blue-200 text-blue-800;
}

/* Responsive utilities */
@media (max-width: 640px) {
  .mobile-hidden {
    @apply hidden;
  }
  
  .mobile-stack {
    @apply flex-col space-y-2 space-x-0;
  }
}

@media (min-width: 641px) {
  .desktop-hidden {
    @apply hidden;
  }
  
  .desktop-row {
    @apply flex-row space-y-0 space-x-4;
  }
}

/* Print styles */
@media print {
  .print-hidden {
    @apply hidden;
  }
  
  .print-break {
    page-break-after: always;
  }
  
  .print-no-break {
    page-break-inside: avoid;
  }
}

/* CRITICAL SIDEBAR TEXT COLOR FIX - Add this to the end of index.css */

/* Maximum specificity override for sidebar navigation text colors */
/* This rule has the highest possible specificity and will override everything */

/* INACTIVE sidebar items - BLACK text in ALL themes */
html body #root .sidebar nav a:not([data-active="true"]),
html body #root .sidebar nav button:not([data-active="true"]),
html body #root .sidebar nav a[data-active="false"],
html body #root .sidebar nav button[data-active="false"],
html body #root [class*="sidebar"] nav a:not([data-active="true"]),
html body #root [class*="sidebar"] nav button:not([data-active="true"]) {
  color: #1e293b !important;
}

/* Force all child elements of inactive items to inherit */
html body #root .sidebar nav a:not([data-active="true"]) *,
html body #root .sidebar nav button:not([data-active="true"]) *,
html body #root .sidebar nav a[data-active="false"] *,
html body #root .sidebar nav button[data-active="false"] * {
  color: inherit !important;
}

/* ACTIVE sidebar items - Default: BLACK text for most themes */
html body #root .sidebar nav a[data-active="true"],
html body #root .sidebar nav button[data-active="true"],
html body #root .sidebar nav a[style*="var(--theme-primary)"],
html body #root .sidebar nav button[style*="var(--theme-primary)"] {
  color: #1e293b !important; /* Default black for most themes */
}

html body #root .sidebar nav a[data-active="true"] *,
html body #root .sidebar nav button[data-active="true"] *,
html body #root .sidebar nav a[style*="var(--theme-primary)"] *,
html body #root .sidebar nav button[style*="var(--theme-primary)"] * {
  color: inherit !important;
}

/* OVERRIDE: WHITE text ONLY for purple and midnight blue themes */
/* Target by data-theme attribute for maximum reliability */
html body #root .sidebar nav a[data-active="true"][data-theme="purple"],
html body #root .sidebar nav button[data-active="true"][data-theme="purple"],
html body #root .sidebar nav a[data-active="true"][data-theme="midnight-blue"],
html body #root .sidebar nav button[data-active="true"][data-theme="midnight-blue"],
/* Also target by body classes */
html body.theme-purple #root .sidebar nav a[data-active="true"],
html body.theme-purple #root .sidebar nav button[data-active="true"],
html body.theme-midnight-blue #root .sidebar nav a[data-active="true"],
html body.theme-midnight-blue #root .sidebar nav button[data-active="true"],
/* Also target by inline styles */
html body.theme-purple #root .sidebar nav a[style*="var(--theme-primary)"],
html body.theme-purple #root .sidebar nav button[style*="var(--theme-primary)"],
html body.theme-midnight-blue #root .sidebar nav a[style*="var(--theme-primary)"],
html body.theme-midnight-blue #root .sidebar nav button[style*="var(--theme-primary)"] {
  color: white !important;
}

/* Force all child elements to inherit white text */
html body #root .sidebar nav a[data-active="true"][data-theme="purple"] *,
html body #root .sidebar nav button[data-active="true"][data-theme="purple"] *,
html body #root .sidebar nav a[data-active="true"][data-theme="midnight-blue"] *,
html body #root .sidebar nav button[data-active="true"][data-theme="midnight-blue"] *,
html body.theme-purple #root .sidebar nav a[data-active="true"] *,
html body.theme-purple #root .sidebar nav button[data-active="true"] *,
html body.theme-midnight-blue #root .sidebar nav a[data-active="true"] *,
html body.theme-midnight-blue #root .sidebar nav button[data-active="true"] * {
  color: inherit !important;
}

/* NUCLEAR OPTION: Target specific href for Settings page */
html body.theme-purple .sidebar a[href="/settings"],
html body.theme-midnight-blue .sidebar a[href="/settings"] {
  color: white !important;
}

html body.theme-purple .sidebar a[href="/settings"] *,
html body.theme-midnight-blue .sidebar a[href="/settings"] * {
  color: white !important;
}

/* Force override any remaining text color issues */
[class*="theme-purple"] .sidebar [data-active="true"],
[class*="theme-midnight"] .sidebar [data-active="true"] {
  color: white !important;
}

[class*="theme-purple"] .sidebar [data-active="true"] *,
[class*="theme-midnight"] .sidebar [data-active="true"] * {
  color: white !important;
}