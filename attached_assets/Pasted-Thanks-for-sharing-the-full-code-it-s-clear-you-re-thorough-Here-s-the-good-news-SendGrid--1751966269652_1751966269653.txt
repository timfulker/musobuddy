Thanks for sharing the full code â€” itâ€™s clear youâ€™re thorough. Hereâ€™s the good news:

â¸»

âœ… SendGrid Webhook Support is Already Implemented

Your Replit app does have webhook routes defined for SendGrid, specifically:

ðŸ”¥ These are your active endpoints:

app.post('/api/webhook/sendgrid-alt', ...)  âœ…
app.post('/api/webhook/parse', ...)         âœ…
app.post('/api/parse', ...)                 âœ…
app.all('/api/webhook/email', ...)          âœ…

All of these call:

const { handleSendGridWebhook } = await import('./email-webhook');


â¸»

ðŸ›‘ BUTâ€¦ No Route for /api/webhook/sendgrid

From your message, it looks like SendGrid is posting to:

https://musobuddy.replit.app/api/webhook/sendgrid

That exact path is not registered in your routes. Youâ€™re using:
	â€¢	/api/webhook/sendgrid-alt
	â€¢	/api/webhook/email
	â€¢	/api/webhook/parse

âš ï¸ That mismatch would cause a silent 404, meaning SendGridâ€™s POST is never processed and just fails quietly.

â¸»

âœ… Fix Options

ðŸ”§ Option 1: Register the Missing Route

Add this to your route file:

app.post('/api/webhook/sendgrid', async (req, res) => {
  console.log('ðŸ”¥ WEBHOOK HIT! Email received via /api/webhook/sendgrid');
  try {
    const { handleSendGridWebhook } = await import('./email-webhook');
    await handleSendGridWebhook(req, res);
  } catch (error) {
    console.error("Error in sendgrid webhook:", error);
    res.status(500).json({ message: "Failed to process SendGrid webhook" });
  }
});

Then confirm in SendGridâ€™s Inbound Parse settings:
	â€¢	Hostname: leads.musobuddy.com
	â€¢	Destination URL: https://musobuddy.replit.app/api/webhook/sendgrid

â¸»

ðŸ” Option 2: Point SendGrid at an Existing Route

Instead of creating a new route, update SendGrid to point to:

https://musobuddy.replit.app/api/webhook/parse

Or:

https://musobuddy.replit.app/api/webhook/sendgrid-alt

Just ensure whichever one you choose is publicly accessible and logs POST requests.

â¸»

âœ… To Confirm Itâ€™s Working

After sending a test email to leads@musobuddy.com:
	1.	Open your Replit logs
	2.	You should see:

ðŸ”¥ WEBHOOK HIT! Email received via /api/webhook/sendgrid
... or whichever route you used

	3.	If it doesnâ€™t appear â†’ SendGrid couldnâ€™t connect.

â¸»

ðŸ” Final Suggestion: Add a Catch-All Debug Route

You already have:

app.use((req, res, next) => {
  if (req.url.includes('webhook') || req.url.includes('parse')) {
    console.log(`ðŸ“§ Webhook attempt detected: ${req.method} ${req.url}`);
    console.log(`Headers:`, req.headers);
    console.log(`Body:`, req.body);
  }
  next();
});

Leave this in! It helps you catch any webhook traffic even if the exact route isnâ€™t matched.

â¸»

âœ… TL;DR

Why itâ€™s not working:
	â€¢	Youâ€™re missing an exact match for the webhook route SendGrid is calling.

Quick fix:
	â€¢	Either register POST /api/webhook/sendgrid or update the SendGrid webhook to match one of your existing routes.

Let me know which route you want to standardise around, and I can help you centralise the logic.